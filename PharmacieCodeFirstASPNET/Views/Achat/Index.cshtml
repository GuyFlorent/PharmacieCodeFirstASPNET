@model PharmacieCodeFirstASPNET.ViewModel.ProduitAchatViewModel

    @{
        ViewBag.Title = "Index";
    }

    <h2>Index</h2>


<p> Faites la selection de vos produis et valider</p>

@Html.ValidationMessageFor(m =>m.ListeDesProduit)

@using (Html.BeginForm())
{
    for( int i =0; i< Model.ListeDesProduit.Count; i++)
    {
<div>
    @Html.CheckBoxFor(m => m.ListeDesProduit[i].EstSelectionne, new { data_val = "true", data_val_verifListe = "Vous devez choisie au moins un produit" })
    @Html.LabelFor(m => m.ListeDesProduit[i].EstSelectionne, Model.ListeDesProduit[i].NomEtPrix_Unité)
    @Html.LabelFor(m => m.ListeDesProduit[i].EstSelectionne, Model.ListeDesProduit[i].Image)
    @Html.LabelFor(m => m.ListeDesProduit[i].EstSelectionne, Model.ListeDesProduit[i].Quantite_Stock_Restante)
    @Html.HiddenFor(m => m.ListeDesProduit[i].id)
    @*@Html.HiddenFor(m => m.ListeDesProduit[i].NomEtPrix_Unité)
    @Html.HiddenFor(m => m.ListeDesProduit[i].Quantite_Stock_Restante)*@


</div>
    }

    <input type="submit" value="Valider la commande"/>
}









    <script type="text/javascript">
        jQuery.validator.addMethod("verifListe", function (value, element, params) {
            var nombreCoche = $('input:checked[data-val-verifListe]').length;
            if (nombreCoche == 0) {
                $('span[data-valmsg-for=ListeDesResto]').text(params.message).removeClass("field-validation-valid").addClass("field-validation-error");
            }
            else {
                $('span[data-valmsg-for=ListeDesResto]').text('');
            }
            return nombreCoche != 0;
        });

        jQuery.validator.unobtrusive.adapters.add
            ("verifListe", function (options) {
                options.params.message = options.message;
                options.rules["verifListe"] = options.params;
                options.messages["verifListe"] = options.message;
            });
    </script>